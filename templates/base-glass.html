<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{BRIDE_NAME}} & {{GROOM_NAME}} - –ì–∞–ª–µ—Ä–∏—ò–∞</title>
  <meta name="description" content="–ü–æ–∑–∏–≤–Ω–∏—Ü–∞ –∑–∞ –≤–µ–Ω—á–∞—ö–µ - {{BRIDE_NAME}} & {{GROOM_NAME}}">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üñºÔ∏è</text></svg>">
  {{THEME_FONTS}}
  <style>
    /* === RESET & BASE === */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --color-bg: linear-gradient(135deg, #E8D5C4 0%, #F5E6D8 50%, #E0C9B8 100%);
      --color-glass: rgba(255, 255, 255, 0.25);
      --color-glass-border: rgba(255, 255, 255, 0.35);
      --color-text: #3D3D3D;
      --color-text-light: #FFFFFF;
      --color-accent: #B76E79;
      --blur-amount: 20px;
      --font-display: 'Cormorant Garamond', serif;
      --font-body: 'Lato', sans-serif;
    }

    html {
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
    }

    body {
      font-family: var(--font-body);
      background: var(--color-bg);
      background-attachment: fixed;
      color: var(--color-text);
      line-height: 1.6;
      overflow-x: auto;
      overflow-y: hidden;
      height: 100vh;
    }

    /* === GALLERY CONTAINER === */
    .gallery-container {
      display: flex;
      height: 100vh;
      width: max-content;
    }

    /* === GALLERY ROOM === */
    .gallery-room {
      width: 100vw;
      height: 100vh;
      scroll-snap-align: start;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      position: relative;
    }

    /* === GLASS CARD === */
    .glass-card {
      background: var(--color-glass);
      backdrop-filter: blur(var(--blur-amount));
      -webkit-backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--color-glass-border);
      border-radius: 24px;
      padding: 3rem;
      max-width: 500px;
      width: 100%;
      box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
      animation: floatIn 0.8s ease;
    }

    @keyframes floatIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .glass-card.large {
      max-width: 700px;
    }

    /* === ENTRANCE ROOM === */
    .entrance-room .glass-card {
      text-align: center;
      padding: 4rem 3rem;
    }

    .entrance-label {
      font-size: 0.7rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--color-accent);
      margin-bottom: 2rem;
    }

    .entrance-names {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 400;
      line-height: 1.2;
      margin-bottom: 1rem;
    }

    .entrance-names .ampersand {
      display: block;
      font-size: 0.5em;
      color: var(--color-accent);
      margin: 0.5rem 0;
    }

    .entrance-tagline {
      font-style: italic;
      color: rgba(61, 61, 61, 0.7);
      margin-bottom: 2rem;
    }

    .entrance-date {
      font-family: var(--font-display);
      font-size: 1.25rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--color-glass-border);
    }

    /* === ROOM INDICATOR === */
    .room-indicator {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.75rem;
      z-index: 100;
      background: var(--color-glass);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 0.75rem 1.25rem;
      border-radius: 50px;
      border: 1px solid var(--color-glass-border);
    }

    .room-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      padding: 0;
    }

    .room-dot.active,
    .room-dot:hover {
      background: var(--color-accent);
      transform: scale(1.2);
    }

    /* === SECTION HEADERS === */
    .section-header {
      font-size: 0.65rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--color-accent);
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .section-title {
      font-family: var(--font-display);
      font-size: 2rem;
      font-weight: 400;
      text-align: center;
      margin-bottom: 2rem;
    }

    /* === STORY ROOM === */
    .story-text {
      font-size: 1.1rem;
      line-height: 1.9;
      text-align: center;
      color: rgba(61, 61, 61, 0.8);
    }

    /* === DETAILS ROOM === */
    .venue-grid {
      display: grid;
      gap: 2rem;
    }

    .venue-item {
      text-align: center;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 16px;
    }

    .venue-type {
      font-size: 0.65rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--color-accent);
      margin-bottom: 0.75rem;
    }

    .venue-name {
      font-family: var(--font-display);
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .venue-time {
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .venue-address {
      font-size: 0.9rem;
      color: rgba(61, 61, 61, 0.7);
      margin-bottom: 1rem;
    }

    .venue-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--color-accent);
      text-decoration: none;
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      transition: opacity 0.3s;
    }

    .venue-link:hover { opacity: 0.7; }

    .venue-link svg {
      width: 14px;
      height: 14px;
    }

    /* === RSVP ROOM === */
    .rsvp-form {
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-label {
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(61, 61, 61, 0.7);
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid var(--color-glass-border);
      border-radius: 12px;
      color: var(--color-text);
      font-family: var(--font-body);
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-input:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--color-accent);
      background: rgba(255, 255, 255, 0.5);
    }

    .form-select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23B76E79' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 1rem center;
    }

    .radio-group {
      display: flex;
      gap: 1.5rem;
      padding: 0.5rem 0;
    }

    .radio-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }

    .radio-label input {
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid var(--color-glass-border);
      border-radius: 50%;
      cursor: pointer;
      position: relative;
      background: rgba(255, 255, 255, 0.3);
    }

    .radio-label input:checked {
      border-color: var(--color-accent);
    }

    .radio-label input:checked::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 10px;
      height: 10px;
      background: var(--color-accent);
      border-radius: 50%;
    }

    .submit-btn {
      width: 100%;
      padding: 1.25rem;
      background: var(--color-accent);
      color: #FFFFFF;
      border: none;
      border-radius: 12px;
      font-family: var(--font-display);
      font-size: 1rem;
      letter-spacing: 0.15em;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 0.5rem;
    }

    .submit-btn:hover {
      background: #A05D67;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(183, 110, 121, 0.3);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .rsvp-deadline {
      text-align: center;
      margin-top: 1rem;
      font-size: 0.85rem;
      color: rgba(61, 61, 61, 0.6);
    }

    /* === FORM STATES === */
    .form-success {
      text-align: center;
      padding: 2rem;
    }

    .success-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .success-title {
      font-family: var(--font-display);
      font-size: 1.75rem;
      margin-bottom: 0.5rem;
    }

    .success-text {
      color: rgba(61, 61, 61, 0.7);
    }

    .hidden { display: none !important; }

    /* === SCROLL HINT === */
    .scroll-hint {
      position: absolute;
      right: 2rem;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      color: rgba(61, 61, 61, 0.5);
      animation: pulse 2s infinite;
    }

    .scroll-hint span {
      font-size: 0.65rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      writing-mode: vertical-rl;
    }

    .scroll-hint svg {
      width: 20px;
      height: 20px;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* === FOOTER ROOM === */
    .footer-room .glass-card {
      text-align: center;
    }

    .footer-hashtag {
      font-family: var(--font-display);
      font-size: 1.5rem;
      color: var(--color-accent);
      margin-bottom: 1rem;
    }

    .footer-message {
      color: rgba(61, 61, 61, 0.7);
      font-style: italic;
    }

    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      .gallery-room { padding: 1rem; }
      .glass-card { padding: 2rem 1.5rem; }
      .room-indicator { bottom: 1rem; }
      .scroll-hint { display: none; }
      .venue-grid { gap: 1.5rem; }
    }

    /* === PARTICLES === */
    .particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      animation: float 15s infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
    }
  </style>
  {{THEME_CSS}}
</head>
<body>
  <!-- Floating Particles -->
  <div class="particles" id="particles"></div>

  <!-- Gallery Container -->
  <div class="gallery-container" id="gallery">

    <!-- ENTRANCE ROOM -->
    <section class="gallery-room entrance-room">
      <div class="glass-card">
        <p class="entrance-label">–ì–∞–ª–µ—Ä–∏—ò–∞ –â—É–±–∞–≤–∏</p>
        <h1 class="entrance-names">
          {{BRIDE_NAME}}
          <span class="ampersand">&</span>
          {{GROOM_NAME}}
        </h1>
        <p class="entrance-tagline">{{INVITATION_INTRO}}</p>
        <p class="entrance-date">{{WEDDING_DATE_FORMATTED}}</p>
      </div>
      <div class="scroll-hint">
        <span>–°–ª–µ–¥–µ—õ–µ</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </div>
    </section>

    <!-- STORY ROOM -->
    {{#IF_STORY}}
    <section class="gallery-room story-room">
      <div class="glass-card large">
        <p class="section-header">–ù–∞—à–∞ –ü—Ä–∏—á–∞</p>
        <p class="story-text">{{STORY_TEXT}}</p>
      </div>
    </section>
    {{/IF_STORY}}

    <!-- DETAILS ROOM -->
    <section class="gallery-room details-room">
      <div class="glass-card large">
        <p class="section-header">–î–µ—Ç–∞—ô–∏</p>

        <div class="venue-grid">
          <div class="venue-item">
            <p class="venue-type">–¶–µ—Ä–µ–º–æ–Ω–∏—ò–∞</p>
            <h3 class="venue-name">{{CEREMONY_VENUE}}</h3>
            <p class="venue-time">{{CEREMONY_TIME}}</p>
            <p class="venue-address">{{CEREMONY_ADDRESS}}</p>
            {{#IF_CEREMONY_MAP}}
            <a href="{{CEREMONY_MAP_URL}}" target="_blank" rel="noopener" class="venue-link">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              –ú–∞–ø–∞
            </a>
            {{/IF_CEREMONY_MAP}}
          </div>

          <div class="venue-item">
            <p class="venue-type">–ü—Ä–æ—Å–ª–∞–≤–∞</p>
            <h3 class="venue-name">{{RECEPTION_VENUE}}</h3>
            <p class="venue-time">{{RECEPTION_TIME}}</p>
            <p class="venue-address">{{RECEPTION_ADDRESS}}</p>
            {{#IF_RECEPTION_MAP}}
            <a href="{{RECEPTION_MAP_URL}}" target="_blank" rel="noopener" class="venue-link">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              –ú–∞–ø–∞
            </a>
            {{/IF_RECEPTION_MAP}}
          </div>
        </div>
      </div>
    </section>

    <!-- RSVP ROOM -->
    <section class="gallery-room rsvp-room">
      <div class="glass-card">
        <p class="section-header">–ü–æ—Ç–≤—Ä–¥–∞ –î–æ–ª–∞—Å–∫–∞</p>
        <h2 class="section-title">–†–°–í–ü</h2>

        <form class="rsvp-form" id="rsvp-form">
          <input type="hidden" name="wedding" value="{{WEDDING_SLUG}}">

          <div class="form-group">
            <label class="form-label" for="guest-name">–ò–º–µ –∏ –ø—Ä–µ–∑–∏–º–µ</label>
            <input type="text" id="guest-name" name="name" class="form-input" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="guest-email">–ï–º–∞–∏–ª</label>
            <input type="email" id="guest-email" name="email" class="form-input" required>
          </div>

          <div class="form-group">
            <label class="form-label">–î–æ–ª–∞–∑–∞–∫</label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="attending" value="yes" required>
                <span>–î–æ–ª–∞–∑–∏–º</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="attending" value="no">
                <span>–ù–µ –º–æ–≥—É</span>
              </label>
            </div>
          </div>

          <div class="form-group" id="guests-group">
            <label class="form-label" for="guests-count">–ë—Ä–æ—ò –≥–æ—Å—Ç–∏—ò—É</label>
            <select id="guests-count" name="guests" class="form-select">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>

          {{#IF_MEAL_OPTIONS}}
          <div class="form-group" id="meal-group">
            <label class="form-label" for="meal-choice">–ò–∑–±–æ—Ä —ò–µ–ª–∞</label>
            <select id="meal-choice" name="meal" class="form-select">
              <option value="">–ò–∑–∞–±–µ—Ä–∏—Ç–µ...</option>
              {{MEAL_OPTIONS}}
            </select>
          </div>
          {{/IF_MEAL_OPTIONS}}

          <button type="submit" class="submit-btn" id="submit-btn">–ü–æ—Ç–≤—Ä–¥–∏</button>
        </form>

        <div class="form-success hidden" id="form-success">
          <div class="success-icon">üñºÔ∏è</div>
          <h3 class="success-title">–•–≤–∞–ª–∞!</h3>
          <p class="success-text">–†–∞–¥—É—ò–µ–º–æ —Å–µ –≤–∞—à–µ–º –¥–æ–ª–∞—Å–∫—É.</p>
        </div>

        <p class="rsvp-deadline">–ú–æ–ª–∏–º–æ –ø–æ—Ç–≤—Ä–¥–∏—Ç–µ –¥–æ {{RSVP_DEADLINE}}</p>
      </div>
    </section>

    <!-- FOOTER ROOM -->
    {{#IF_HASHTAG}}
    <section class="gallery-room footer-room">
      <div class="glass-card">
        <p class="footer-hashtag">#{{WEDDING_HASHTAG}}</p>
        <p class="footer-message">–í–∏–¥–∏–º–æ —Å–µ –Ω–∞ –æ—Ç–≤–∞—Ä–∞—ö—É –∏–∑–ª–æ–∂–±–µ!</p>
      </div>
    </section>
    {{/IF_HASHTAG}}

  </div>

  <!-- Room Indicator -->
  <nav class="room-indicator" id="room-indicator"></nav>

  <script>
    (function() {
      // Generate particles
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (10 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }

      // Room navigation
      const rooms = document.querySelectorAll('.gallery-room');
      const indicator = document.getElementById('room-indicator');

      rooms.forEach((_, i) => {
        const dot = document.createElement('button');
        dot.className = 'room-dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', () => {
          rooms[i].scrollIntoView({ behavior: 'smooth', inline: 'start' });
        });
        indicator.appendChild(dot);
      });

      const dots = indicator.querySelectorAll('.room-dot');

      // Update active dot on scroll
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const index = Array.from(rooms).indexOf(entry.target);
            dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
          }
        });
      }, { threshold: 0.5 });

      rooms.forEach(room => observer.observe(room));

      // RSVP Form
      const form = document.getElementById('rsvp-form');
      const guestsGroup = document.getElementById('guests-group');
      const mealGroup = document.getElementById('meal-group');
      const successMsg = document.getElementById('form-success');

      form.querySelectorAll('input[name="attending"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
          const isAttending = e.target.value === 'yes';
          if (guestsGroup) guestsGroup.style.display = isAttending ? 'flex' : 'none';
          if (mealGroup) mealGroup.style.display = isAttending ? 'flex' : 'none';
        });
      });

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submit-btn');
        btn.disabled = true;
        btn.textContent = '...';

        try {
          const formData = new FormData(form);
          const response = await fetch('{{RSVP_SCRIPT_URL}}', {
            method: 'POST',
            body: formData
          });

          if (response.ok) {
            form.classList.add('hidden');
            successMsg.classList.remove('hidden');
          } else {
            throw new Error('Submit failed');
          }
        } catch (error) {
          btn.disabled = false;
          btn.textContent = '–ü–æ—Ç–≤—Ä–¥–∏';
          alert('–î–æ—à–ª–æ —ò–µ –¥–æ –≥—Ä–µ—à–∫–µ. –ú–æ–ª–∏–º–æ –ø–æ–∫—É—à–∞—ò—Ç–µ –ø–æ–Ω–æ–≤–æ.');
        }
      });
    })();
  </script>
</body>
</html>
